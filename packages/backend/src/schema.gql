# -----------------------------------------------
# !!! THIS FILE WAS GENERATED BY TYPE-GRAPHQL !!!
# !!!   DO NOT MODIFY THIS FILE BY YOURSELF   !!!
# -----------------------------------------------

type APIKey {
  id: Int!
  createdAt: DateTime!
  updatedAt: DateTime!
}

type Application {
  id: Int!
  name: String!
  description: String!
  createdBy: User
  createdAt: DateTime!
  updatedAt: DateTime!
  organization: Organization!
  containerGroups: [ContainerGroup!]!
  deployments: [Deployment!]!
  secrets: [Secret!]!
}

type ApplicationMutations {
  delete: Application!
  update(secret: SecretInput, description: String, name: String): Application!
  createDeployment(strategy: DeploymentStrategy!, label: String!, image: String!): Deployment!
  updateDeployment(image: String!, id: Int!): Deployment!
  deleteDeployment(id: Int!): Deployment!
  createContainerGroup(number: Int!, size: Int!, deployment: Int!, label: String!): ContainerGroup!
  updateContainerGroup(number: Int, label: String, id: Int!): ContainerGroup!
  deleteContainerGroup(id: Int!): ContainerGroup!
}

type Container {
  id: Int!
  status: String!
}

type ContainerGroup {
  id: Int!
  label: String!
  size: ContainerSize!
  containerCount: Float!
  createdAt: DateTime!
  updatedAt: DateTime!
  deployment: Deployment!
  containers: [Container!]!
}

enum ContainerSize {
  S1x1
  S2x2
  S4x4
  S8x8
  S16x16
}

"""
The javascript `Date` as string. Type represents date and time as the ISO Date string.
"""
scalar DateTime

type Deployment {
  id: Int!
  label: String!
  strategy: DeploymentStrategy!
  image: String!
  createdAt: DateTime!
  updatedAt: DateTime!
  containerGroups: [ContainerGroup!]!
}

enum DeploymentStrategy {
  REPLACE
  RECREATE
}

type Mutation {
  createAPIKeyRequest: String!
  grantAPIKey(uuid: String!): Result!
  application(id: Int!): ApplicationMutations!
  organization(
    """
    The ID of the organization that you will be performing mutations on. If
    empty, we will use the signed-in users personal organization.
    """
    id: Int
  ): OrganizationMutations!
  exchangeTOTP(token: String!): Result!
  enableTotp(token: String!, secret: String!): Result!
  disableTotp(password: String!): Result!
  signUp(password: String!, email: String!, name: String!): Result!
  signIn(password: String!, email: String!): SignInResult!
  gitHubSignIn(code: String!): SignInResult!
  updateAccount(email: String, name: String): User!
  forgotPassword(email: String!): Result!
  resetPassword(password: String!, uuid: String!): Result!
}

type Organization {
  id: Int!
  isPersonal: Boolean!
  name: String!
  createdAt: DateTime!
  updatedAt: DateTime!
  applications: [Application!]!
}

type OrganizationMutations {
  createApplication(description: String, name: String!): Application!
}

type Query {
  getAPIKeyFromRequest(uuid: String!): String
  application(id: Int!): Application!
  organization(
    """
    The ID of the organization to load. If empty, we will use the signed-in users personal organization.
    """
    id: Int
  ): Organization!
  me: User!
}

"""Provides a boolean to determine if the action was successful or not."""
type Result {
  ok: Boolean!
}

type Secret {
  key: String!
  value: String!
}

input SecretInput {
  key: String!
  value: String!
}

"""
A special type of result used just for SignIns. Provides a boolean for if the
user requires a TOTP exchange before being fully logged in.
"""
type SignInResult {
  ok: Boolean!
  requiresTOTP: Boolean!
}

type User {
  id: Int!
  githubID: Int
  name: String!
  email: String!
  createdAt: DateTime!
  updatedAt: DateTime!
  hasTOTP: Boolean!
  personalOrganization: Organization!
  apiKeys: [APIKey!]!
  onboardTOTP: String!
  organizations: [Organization!]!
}
